<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      th:replace="base/base::layout(~{::#style},~{::#content},~{::#script})">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link id="style" rel="stylesheet" th:href="@{/css/product.css}">
</head>
<body>
<section id="content">
    <style>


        .zoom {
            position: relative;
        }

        #imgZoom {
            position: absolute;
            left: 0;
            top: 0;
            --zoom-x: 50%;
            --zoom-y: 50%;
            transform: scale(1.5);
            pointer-events: none;
            clip-path: circle(
                    100px at var(--zoom-x) var(--zoom-y)
            );
            opacity: 0;
        }
    </style>
    <div class="row  d-flex  justify-content-center " style="--bs-gutter-x: 0 ">
        <div class=" col-md-10   row " style="--bs-gutter-x: 0 ">
            <div class="zoom col-md-8">
                <div class=" d-flex flex-wrap  " id="imgZoom">
                    <div class="w-50  " id="" th:each="i:${product.list}">
                        <img th:src="@{'/img/productImages/'+${i.name}}" alt="" class="img-fluid img-thumbnail w-100 ">

                    </div>

                </div>
                <div class=" d-flex flex-wrap  ">
                    <div class="w-50  " th:each="i:${product.list}">
                        <img th:src="@{'/img/productImages/'+${i.name}}" alt="" class="img-fluid img-thumbnail w-100 ">
                    </div>

                </div>
            </div>


            <!--                <div class="col-md-8 d-flex flex-wrap "  >-->
            <!--                    <div class="zoom w-50" id="">-->
            <!--                        <img th:src="@{'/img/productImages/'+${product.list[0].name}}" alt=""   class="img-fluid img-thumbnail w-100 ">-->
            <!--                        <img th:src="@{'/img/productImages/'+${product.list[0].name}}" alt=""   class="img-fluid img-thumbnail w-100 imgZoom" id="imgZoom">-->
            <!--                    </div>-->
            <!--                    <div class="zoom w-50">-->
            <!--                        <img th:src="@{'/img/productImages/'+${product.list[1].name}}" alt=""   class="img-fluid img-thumbnail w-100 ">-->
            <!--                        <img th:src="@{'/img/productImages/'+${product.list[1].name}}" alt=""   class="img-fluid img-thumbnail w-100 imgZoom" id="imgZoom4">-->
            <!--                    </div>-->
            <!--                    <div class="zoom w-50">-->
            <!--                        <img th:src="@{'/img/productImages/'+${product.list[2].name}}" alt=""   class="img-fluid img-thumbnail w-100 ">-->
            <!--                        <img th:src="@{'/img/productImages/'+${product.list[2].name}}" alt=""   class="img-fluid img-thumbnail w-100 imgZoom " id="imgZoom2">-->
            <!--                    </div>-->
            <!--                    <div class="zoom w-50">-->
            <!--                        <img th:src="@{'/img/productImages/'+${product.list[3].name}}" alt=""   class="img-fluid img-thumbnail w-100 ">-->
            <!--                        <img th:src="@{'/img/productImages/'+${product.list[3].name}}" alt=""   class="img-fluid img-thumbnail w-100 imgZoom" id="imgZoom3">-->
            <!--                    </div>-->
            <!--                </div>-->


            <div class="col-md-4 tb product-details " th:object="${product}">
<!--                <form th:action="@{/user/wishlist/add/${product.productId}}" method="post">-->
<!--                    <button th:if="${isWishlisted}" type="submit" class="btn btn-danger"></button>-->
<!--                    <button  th:unless="${isWishlisted}" type="submit" class="btn btn-light"></button>-->
<!--                </form>-->
                <div class="m-5 ">
                    <h1 class="m-5"><span th:text="${product.productName}"
                                          class="text-capitalize display-1 fw-medium  "></span></h1>
                    <h1 class="m-5"><span th:text="${product.brand}"
                                          class="text-uppercase  text-secondary-emphasis"></span></h1>
                    <h1 class="display-6 m-5 mb-0">MRP:<span th:text="'&#8377'+${product.productMrp}"
                                                             class="text-decoration-line-through display-6"></span></h1>
                    <h1 th:text="'&#8377'+${product.offerPrice}" class=" display-2 m-5"></h1>

                    <h1 class="ms-5">AVAILABLE STOCK</h1>
                    <div class="row ms-5">

                        <div th:if="${product.stock.size_2}!=0"
                             class="col-md-2 fs-1   rounded-5  border border-2 border-black text-white  bg-dark text-center m-2">
                            <span class="fs-3">size</span>2
                        </div>
                        <div th:if="${product.stock.size_3}!=0"
                             class="col-md-2 fs-1   rounded-5  border border-2 border-black text-white  bg-dark text-center m-2">
                            <span class="fs-3">size</span>3
                        </div>
                        <div th:if="${product.stock.size_4}!=0"
                             class="col-md-2 fs-1   rounded-5  border border-2 border-black text-white  bg-dark text-center m-2">
                            <span class="fs-3">size</span>4
                        </div>
                        <div th:if="${product.stock.size_5}!=0"
                             class="col-md-2 fs-1   rounded-5  border border-2 border-black text-white  bg-dark text-center m-2">
                            <span class="fs-3">size</span>5
                        </div>
                        <div th:if="${product.stock.size_6}!=0"
                             class="col-md-2 fs-1   rounded-5  border border-2 border-black text-white  bg-dark text-center m-2">
                            <span class="fs-3">size</span>6
                        </div>
                        <div th:if="${product.stock.size_7}!=0"
                             class="col-md-2 fs-1   rounded-5  border border-2 border-black text-white  bg-dark text-center m-2">
                            <span class="fs-3">size</span>7
                        </div>
                        <div th:if="${product.stock.size_8}!=0"
                             class="col-md-2 fs-1   rounded-5  border border-2 border-black text-white  bg-dark text-center m-2">
                            <span class="fs-3">size</span>8
                        </div>
                        <div th:if="${product.stock.size_9}!=0"
                             class="col-md-2 fs-1   rounded-5  border border-2 border-black text-white  bg-dark text-center m-2">
                            <span class="fs-3">size</span>9
                        </div>
                        <div th:if="${product.stock.size_10}!=0"
                             class="col-md-2 fs-1   rounded-5  border border-2 border-black text-white  bg-dark text-center m-2">
                            <span class="fs-3">size</span>10
                        </div>
                        <div th:if="${product.stock.size_11}!=0"
                             class="col-md-2 fs-1   rounded-5  border border-2 border-black text-white  bg-dark text-center m-2">
                            <span class="fs-3">size</span>11
                        </div>
                        <div th:if="${product.stock.size_12}!=0"
                             class="col-md-2 fs-1   rounded-5  border border-2 border-black text-white  bg-dark text-center m-2">
                            <span class="fs-3">size</span>12
                        </div>
                    </div>
                </div>
                <div class="row p-2">

                        <a th:if="${isProductExists}" th:href="@{/user/cart}"  class="col-md-6">
                            <button class="rounded-5 w-100    btn btn-warning   btn-outline-dark  fs-1">GO TO CART</button>
                        </a>
                        <form th:if="!${isProductExists}" th:action="@{'/user/cart/add/'+${product.productId}}" method="post" class="col-md-6">
                             <button class="rounded-5 w-100    btn btn-warning   btn-outline-dark  fs-1">ADD TO CART</button>
                        </form>

                        <form th:action="@{'/user/checkout/add/'+${product.productId}}" method="post"  class="col-md-6">
                            <button class="rounded-5    w-100  btn btn-outline-dark   fs-1" >BUY NOW </button>
                        </form>
                </div>

            </div>


        </div>
        <div class="col-md-10 row">
            <div class="col-md-8">
                <h1 class="text-dark ms-0 mb-0 mt-5 fs-1">DESCRIPTION</h1>

                <p  class="fs-3 mt-0"><span th:text="${product.productDescription} "></span><span>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Corporis necessitatibus numquam quaerat. Ab at
                    delectus distinctio eaque excepturi, iusto maxime nam nihil obcaecati quos. A ad alias, aliquid
                    assumenda consectetur delectus dicta distinctio dolore ducimus ea eius enim excepturi exercitationem
                    fugiat hic in labore laboriosam magnam magni modi natus non nostrum possimus quae quaerat quis quo rerum
                    tenetur ullam veniam. Adipisci blanditiis consequuntur dicta, dolor incidunt necessitatibus nobis
                    nostrum numquam quam! Adipisci amet consequuntur cum cupiditate delectus ducimus eos fugit harum in
                    ipsum, iste, maxime, perspiciatis placeat praesentium provident recusandae repellendus reprehenderit
                    ullam! Delectus hic omnis quisquam repudiandae rerum. Quasi</span>
            </div>
       </div>
        <div class="col-md-10 row border border-1">
            <h1>CUSTOMER REVIEWS</h1>
            <div class="row row-cols-1 row-cols-md-5 g-4">
                <div class="col">
                    <div class="card h-100">
                        <img src="..." class="card-img-top" alt="...">
                        <div class="card-body">
                            <h5 class="card-title">Card title</h5>
                            <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>
                        </div>
                        <div class="card-footer">
                            <small class="text-body-secondary">Last updated 3 mins ago</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

</section>

<script id="script">
    let zoom = document.querySelector('.zoom');
    let imgZoom = document.getElementById('imgZoom');

    zoom.addEventListener('mousemove', (event) => {
        imgZoom.style.opacity = 1;

        let positionPx = event.x - zoom.getBoundingClientRect().left;
        let positionX = (positionPx / zoom.offsetWidth) * 100;

        let positionPy = event.y - zoom.getBoundingClientRect().top;
        let positionY = (positionPy / zoom.offsetHeight) * 100;

        imgZoom.style.setProperty('--zoom-x', positionX + '%');
        imgZoom.style.setProperty('--zoom-y', positionY + '%');


        let transformX = -(positionX - 50) / 3.5;
        let transformY = -(positionY - 50) / 3.5;
        imgZoom.style.transform = `scale(1.5) translateX(${transformX}%) translateY(${transformY}%)`;

    })
    zoom.addEventListener('mouseout', () => {
        imgZoom.style.opacity = 0;

    })
</script>
</body>
</html>